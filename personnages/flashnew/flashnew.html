<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Famille FLASH - Le Livre</title>
    <link rel="icon" type="image/png" href="//ipromx.store/cdn/shop/files/grismarque.png?crop=center&height=32&v=1731915247&width=32">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Cinzel:wght@400;600;700&family=Playfair+Display:wght@400;600;700&family=Pirata+One&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            color: #fff;
            overflow: hidden;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .ambient-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            background: radial-gradient(circle, rgba(255,215,0,0.8) 0%, rgba(255,215,0,0) 70%);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.3; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 0.8; }
        }

        .back-button {
            position: fixed;
            top: 15px;
            left: 15px;
            background: linear-gradient(135deg, #ffd700, #f39c12);
            color: #000;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 700;
            z-index: 1000;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .back-button:hover {
            background: linear-gradient(135deg, #f39c12, #ffd700);
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 215, 0, 0.5);
        }

        .logo {
            position: absolute;
            top: 10px;
            right: 10px;
            max-width: 100px;
            z-index: 1000;
        }

        .book-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            z-index: 10;
        }

        .book {
            position: relative;
            width: 800px;
            height: 550px;
            display: flex;
            filter: drop-shadow(0 20px 40px rgba(0, 0, 0, 0.6));
        }

        .page {
            position: relative;
            width: 50%;
            height: 100%;
            background: linear-gradient(135deg, #fefefe 0%, #f8f8f8 100%);
            border: 3px solid #8b4513;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .page[class*="bg"] {
            background: none !important;
        }

        .page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 215, 0, 0.4) 5%, transparent 10%);
            pointer-events: none;
        }

        .page[data-position="left"] {
            border-right: 1px solid rgba(255, 215, 0, 0.4);
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }

        .page[data-position="right"] {
            border-left: 1px solid rgba(255, 215, 0, 0.4);
            border-top-left-radius: 0;
            border-bottom-left-radius: 0;
        }

        .page[data-position="center"] {
            width: 100%;
            border: 3px solid rgba(255, 215, 0, 0.4);
            box-shadow: 0 20px 60px rgba(255, 215, 0, 0.4);
            border-radius: 12px;
        }

        .cover-page {
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .david-bg .page-content {
            background: linear-gradient(135deg, #222222 0%, #808080 100%) !important;
        }

        .john-bg .page-content {
            background: linear-gradient(135deg, #2c1810 0%, #8b4513 100%) !important;
        }

        .intro-sommaire-bg {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('../../images/parchment-bg.jpg') !important;
            background-size: cover;
            background-position: center;
        }

        .page-content {
            padding: 25px;
            height: 100%;
            display: flex;
            flex-direction: column;
            color: #333;
            overflow-y: auto;
            position: relative;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(248, 248, 248, 0.98) 100%);
        }

        .david-bg h1, .david-bg h2, .david-bg p,
        .john-bg h1, .john-bg h2, .john-bg p {
            color: #fff;
        }

        .intro-sommaire-bg h1, .intro-sommaire-bg h2, .intro-sommaire-bg p {
            color: #fff;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }

        .david-bg .epic-chapter-title,
        .john-bg .epic-chapter-title {
            color: transparent;
            background: linear-gradient(135deg, #ffd700, #f39c12);
            -webkit-background-clip: text;
            background-clip: text;
        }

        .chapter-title-page .page-content {
            overflow-y: hidden;
        }

        .page-number {
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-size: 14px;
            color: #8b4513;
            font-weight: 700;
            background: rgba(255, 255, 255, 0.9);
            padding: 5px 10px;
            border-radius: 12px;
            border: 1px solid #ffd700;
        }

        .david-bg .page-number,
        .john-bg .page-number {
            background: rgba(255, 215, 0, 0.9);
            color: #000;
        }

        .chapter-indicator-main {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.95), rgba(243, 156, 18, 0.95));
            color: #000;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            z-index: 200;
            font-weight: 700;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .page-title {
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            color: #8b4513;
            margin-bottom: 20px;
            text-align: center;
            border-bottom: 3px solid #ffd700;
            padding-bottom: 10px;
        }

        .epic-chapter-title {
            font-family: 'Cinzel', serif;
            font-size: 40px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 20px;
            color: #8b4513;
            text-shadow: 2px 2px 6px rgba(255, 215, 0, 0.5);
            position: relative;
            padding: 10px 20px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 215, 0, 0.05));
            border: 2px solid #ffd700;
            border-radius: 8px;
            animation: titleEnter 0.8s ease-out;
        }

        @keyframes titleEnter {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .epic-chapter-title::before,
        .epic-chapter-title::after {
            content: '✦';
            position: absolute;
            color: #ffd700;
            font-size: 28px;
            top: 50%;
            transform: translateY(-50%);
        }

        .epic-chapter-title::before {
            left: -40px;
        }

        .epic-chapter-title::after {
            right: -40px;
        }

        .chapter-subtitle {
            font-family: 'Cinzel', serif;
            font-size: 28px;
            font-weight: 600;
            text-align: center;
            margin-bottom: 20px;
            color: #ffd700;
        }

        .intro-text {
            font-family: 'Playfair Display', serif;
            font-size: 18px;
            line-height: 1.8;
            text-align: center;
            color: #333;
            margin-bottom: 20px;
            padding: 10px;
        }

        .intro-text-epic {
            font-family: 'Cinzel', serif;
            font-size: 24px;
            font-weight: 700;
            text-align: center;
            color: transparent;
            background: linear-gradient(135deg, #ffd700, #f39c12);
            -webkit-background-clip: text;
            background-clip: text;
            margin-bottom: 20px;
            padding: 10px 20px;
            border: 1px solid #ffd700;
            border-radius: 8px;
        }

        .page-image {
            width: 100%;
            max-width: 200px;
            border-radius: 12px;
            margin: 15px auto;
            display: block;
            border: 3px solid #ffd700;
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .chapter-image {
            width: 100%;
            max-width: 200px;
            border-radius: 12px;
            margin: 5px auto;
            display: block;
            border: 3px solid #ffd700;
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.3);
            transition: transform 0.3s ease;
        }

        .chapter-image[style*="max-width: 100px"] {
            max-width: 100px;
        }

        .page-image:hover,
        .chapter-image:hover {
            transform: scale(1.05);
        }

        .text-content p {
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 15px;
            text-align: justify;
            text-indent: 20px;
        }

        .text-content h2 {
            font-size: 18px;
            margin: 20px 0 10px;
            color: #8b4513;
            border-left: 4px solid #ffd700;
            padding-left: 15px;
        }

        .david-bg .text-content h2,
        .john-bg .text-content h2 {
            color: #ffd700;
        }

        .sommaire-list {
            list-style: none;
            padding: 0;
        }

        .sommaire-item {
            margin-bottom: 15px;
            cursor: pointer;
            padding: 15px;
            border-left: 4px solid #ffd700;
            background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,215,0,0.05));
            border-radius: 0 12px 12px 0;
            font-weight: 600;
            color: #fff8dc;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            transition: all 0.3s ease;
        }

        .sommaire-item:hover {
            background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,215,0,0.1));
            transform: translateX(5px);
        }

        .episodes-list {
            margin-top: 20px;
        }

        .episode-item {
            margin-bottom: 15px;
            font-size: 13px;
            padding: 15px;
            background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,215,0,0.05));
            border-radius: 12px;
            border-left: 4px solid #ffd700;
            transition: all 0.3s ease;
        }

        .episode-item:hover {
            transform: translateX(5px);
            background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,215,0,0.08));
        }

        .episode-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #fff;
        }

        .episode-button {
            background: linear-gradient(135deg, #ffd700, #f39c12);
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            cursor: pointer;
            font-weight: 700;
            color: #000;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .episode-button:hover {
            background: linear-gradient(135deg, #f39c12, #ffd700);
            transform: translateY(-2px);
        }

        .navigation {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            justify-content: space-between;
            width: 1000px;
            left: 50%;
            margin-left: -500px;
            z-index: 1000;
        }

        .nav-button {
            background: linear-gradient(135deg, #ffd700, #f39c12);
            color: #000;
            border: none;
            padding: 15px 30px;
            border-radius: 30px;
            font-weight: 700;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }

        .nav-button:hover:not(:disabled) {
            background: linear-gradient(135deg, #f39c12, #ffd700);
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 215, 0, 0.5);
        }

        .nav-button:disabled {
            background: linear-gradient(135deg, #666, #555);
            color: #999;
            cursor: not-allowed;
        }

        .page-indicator {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.95), rgba(243, 156, 18, 0.95));
            color: #000;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 14px;
            z-index: 200;
            font-weight: 700;
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .page-content::-webkit-scrollbar {
            width: 8px;
        }

        .page-content::-webkit-scrollbar-track {
            background: rgba(139, 69, 19, 0.1);
            border-radius: 10px;
        }

        .page-content::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ffd700, #f39c12);
            border-radius: 10px;
        }

        .page-content::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #f39c12, #ffd700);
        }

        /* Mobile Manga Reader Styles (Inspired by scans.html) */
        @media (max-width: 768px) {
            body {
                background-color: #111;
                overflow: auto;
                display: block;
                min-height: 100vh;
                padding: 0;
                margin: 0;
            }

            .ambient-particles {
                display: none;
            }

            .back-button {
                position: fixed;
                top: 10px;
                left: 10px;
                padding: 8px 16px;
                background: linear-gradient(135deg, #ffd700, #f39c12);
                color: #000;
                text-decoration: none;
                border-radius: 10px;
                font-size: 14px;
                font-family: 'Pirata One', sans-serif;
                font-weight: bold;
                transition: all 0.3s ease;
                border: 2px solid #000;
                z-index: 1000;
            }

            .back-button:hover {
                background: linear-gradient(135deg, #f39c12, #ffd700);
                transform: scale(1.05);
            }

            .logo {
                position: fixed;
                top: 10px;
                right: 10px;
                max-width: 40px;
                z-index: 1000;
            }

            .book-container {
                display: none;
            }

            .manga-header {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%);
                border-bottom: 2px solid #ffd700;
                padding: 10px;
                z-index: 1000;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .manga-title {
                font-family: 'Cinzel', serif;
                font-size: 20px;
                font-weight: 700;
                color: #ffd700;
                text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
                text-align: center;
            }

            .manga-reader {
                margin-top: 60px;
                margin-bottom: 80px;
                padding: 10px;
                min-height: calc(100vh - 140px);
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .page-selector {
                position: fixed;
                top: 60px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0, 0, 0, 0.8);
                padding: 8px;
                border-radius: 20px;
                z-index: 999;
                border: 2px solid #ffd700;
            }

            .page-selector select {
                padding: 8px 12px;
                font-size: 14px;
                background-color: #222;
                color: white;
                border: 2px solid #ffd700;
                border-radius: 8px;
                font-family: 'Cinzel', serif;
                font-weight: 600;
            }

            .current-page-content {
                width: 100%;
                max-width: 600px;
                margin: 0 auto;
                padding: 20px;
                background: linear-gradient(135deg, #fefefe 0%, #f8f8f8 100%);
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(255, 215, 0, 0.3);
                border: 2px solid #ffd700;
                min-height: 60vh;
                position: relative;
                overflow-y: auto;
                color: #333;
            }

            .current-page-content.cover-bg {
                background: url('../../images/flashlivre2.webp') no-repeat center center fixed !important;
                background-size: cover;
                min-height: 70vh;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .current-page-content.david-bg {
                background: linear-gradient(135deg, #222222 0%, #808080 100%);
                color: #fff;
            }

            .current-page-content.john-bg {
                background: linear-gradient(135deg, #2c1810 0%, #8b4513 100%);
                color: #fff;
            }

            .current-page-content.intro-sommaire-bg {
                background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('../../images/parchment-bg.jpg');
                background-size: cover;
                background-position: center;
                color: #fff;
            }

            .page-indicator-manga {
                position: fixed;
                top: 110px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, rgba(255, 215, 0, 0.95), rgba(243, 156, 18, 0.95));
                color: #000;
                padding: 8px 16px;
                border-radius: 20px;
                font-size: 12px;
                font-weight: 700;
                box-shadow: 0 4px 15px rgba(255, 215, 0, 0.4);
                z-index: 998;
                border: 1px solid #ffd700;
            }

            .manga-navigation {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%);
                border-top: 2px solid #ffd700;
                padding: 10px 20px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                z-index: 1000;
            }

            .manga-nav-button {
                background: linear-gradient(135deg, #ffd700, #f39c12);
                color: #000;
                border: none;
                padding: 10px 20px;
                border-radius: 25px;
                font-weight: 700;
                cursor: pointer;
                font-size: 14px;
                box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
                text-transform: uppercase;
                letter-spacing: 1px;
                min-width: 80px;
                transition: all 0.3s ease;
            }

            .manga-nav-button:hover:not(:disabled) {
                background: linear-gradient(135deg, #f39c12, #ffd700);
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(255, 215, 0, 0.5);
            }

            .manga-nav-button:disabled {
                background: linear-gradient(135deg, #666, #555);
                color: #999;
                cursor: not-allowed;
            }

            .chapter-info-manga {
                background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(243, 156, 18, 0.1));
                color: #ffd700;
                padding: 8px 16px;
                border-radius: 15px;
                font-size: 12px;
                font-weight: 600;
                border: 1px solid rgba(255, 215, 0, 0.3);
                text-align: center;
            }

            .mobile-page-title {
                font-family: 'Playfair Display', serif;
                font-size: 24px;
                margin-bottom: 15px;
                text-align: center;
                border-bottom: 2px solid #ffd700;
                padding-bottom: 8px;
                color: #333;
            }

            .mobile-epic-title {
                font-family: 'Cinzel', serif;
                font-size: 28px;
                font-weight: 700;
                text-align: center;
                margin-bottom: 15px;
                color: transparent;
                background: linear-gradient(135deg, #ffd700, #f39c12);
                -webkit-background-clip: text;
                background-clip: text;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
                padding: 10px 15px;
                border: 2px solid #ffd700;
                border-radius: 8px;
            }

            .mobile-chapter-subtitle {
                font-family: 'Cinzel', serif;
                font-size: 20px;
                font-weight: 600;
                text-align: center;
                margin-bottom: 15px;
                color: #ffd700;
            }

            .mobile-intro-text {
                font-family: 'Playfair Display', serif;
                font-size: 16px;
                line-height: 1.6;
                text-align: center;
                margin-bottom: 15px;
                padding: 10px;
            }

            .mobile-intro-text-epic {
                font-family: 'Cinzel', serif;
                font-size: 18px;
                font-weight: 700;
                text-align: center;
                color: #ffd700;
                margin-bottom: 15px;
                padding: 10px 15px;
                border: 1px solid #ffd700;
                border-radius: 8px;
            }

            .mobile-page-image,
            .mobile-chapter-image {
                width: 100%;
                max-width: 150px;
                border-radius: 8px;
                margin: 10px auto;
                display: block;
                border: 2px solid #ffd700;
                box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
            }

            .mobile-chapter-image[style*="max-width: 100px"] {
                max-width: 80px;
            }

            .mobile-text-content {
                font-size: 14px;
                line-height: 1.5;
            }

            .mobile-text-content p {
                margin-bottom: 12px;
                text-align: justify;
                text-indent: 15px;
            }

            .mobile-text-content h2 {
                font-size: 16px;
                margin: 15px 0 8px;
                border-left: 3px solid #ffd700;
                padding-left: 10px;
                color: #ffd700;
            }

            .mobile-sommaire-list {
                list-style: none;
                padding: 0;
                margin-top: 20px;
            }

            .mobile-sommaire-item {
                margin-bottom: 10px;
                cursor: pointer;
                padding: 12px;
                border-left: 3px solid #ffd700;
                background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,215,0,0.05));
                border-radius: 0 8px 8px 0;
                font-weight: 600;
                font-size: 14px;
                color: #fff;
                transition: all 0.3s ease;
            }

            .mobile-sommaire-item:hover {
                background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,215,0,0.1));
                transform: translateX(5px);
            }

            .mobile-episodes-list {
                margin-top: 15px;
            }

            .mobile-episode-item {
                margin-bottom: 10px;
                font-size: 12px;
                padding: 10px;
                background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,215,0,0.05));
                border-radius: 8px;
                border-left: 3px solid #ffd700;
                transition: all 0.3s ease;
            }

            .mobile-episode-item:hover {
                transform: translateX(3px);
                background: linear-gradient(135deg, rgba(255,215,0,0.15), rgba(255,215,0,0.08));
            }

            .mobile-episode-title {
                font-weight: 600;
                margin-bottom: 6px;
                color: #fff;
            }

            .mobile-episode-button {
                background: linear-gradient(135deg, #ffd700, #f39c12);
                border: none;
                padding: 6px 12px;
                border-radius: 15px;
                font-size: 11px;
                cursor: pointer;
                font-weight: 700;
                color: #000;
                transition: all 0.3s ease;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }

            .mobile-episode-button:hover {
                background: linear-gradient(135deg, #f39c12, #ffd700);
                transform: translateY(-1px);
            }

            .navigation,
            .page-indicator,
            .chapter-indicator-main {
                display: none;
            }

            .current-page-content::-webkit-scrollbar {
                width: 4px;
            }

            .current-page-content::-webkit-scrollbar-track {
                background: rgba(255, 215, 0, 0.1);
                border-radius: 5px;
            }

            .current-page-content::-webkit-scrollbar-thumb {
                background: linear-gradient(135deg, #ffd700, #f39c12);
                border-radius: 5px;
            }

            .current-page-content::-webkit-scrollbar-thumb:hover {
                background: linear-gradient(135deg, #f39c12, #ffd700);
            }
        }

        @media (min-width: 769px) {
            .manga-header,
            .manga-reader,
            .page-selector,
            .page-indicator-manga,
            .manga-navigation {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="ambient-particles" id="particles"></div>
    <a href="../flash/choix.html" class="back-button">RETOUR</a>
    <img src="../../images/flashballelogo.webp" alt="Logo Flash" class="logo">

    <!-- Desktop Version -->
    <div class="navigation">
        <button class="nav-button" id="prevBtn" onclick="previousPage()" disabled>← Précédent</button>
        <button class="nav-button" id="nextBtn" onclick="nextPage()">Suivant →</button>
    </div>
    <div class="book-container">
        <div class="book" id="book"></div>
    </div>
    <div class="page-indicator" id="pageIndicator">Couverture</div>
    <div class="chapter-indicator-main" id="chapterIndicator" style="display: none;"></div>

    <!-- Mobile Manga Reader Version -->
    <div class="manga-header">
        <div class="manga-title">Famille FLASH - Le Livre</div>
    </div>
    <div class="page-selector">
        <select id="pageSelect" onchange="goToMangaPage(this.value)"></select>
    </div>
    <div class="page-indicator-manga" id="pageIndicatorManga">Page 1/10</div>
    <div class="manga-reader">
        <div class="current-page-content" id="currentPageContent"></div>
    </div>
    <div class="manga-navigation">
        <button class="manga-nav-button" id="prevMangaBtn" onclick="previousMangaPage()" disabled>← Précédent</button>
        <div class="chapter-info-manga" id="chapterInfoManga">Couverture</div>
        <button class="manga-nav-button" id="nextMangaBtn" onclick="nextMangaPage()">Suivant →</button>
    </div>

    <script>
        function createParticles() {
            const container = document.getElementById('particles');
            if (!container) return;
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.width = particle.style.height = (Math.random() * 4 + 2) + 'px';
                particle.style.animationDuration = (Math.random() * 4 + 4) + 's';
                particle.style.animationDelay = Math.random() * 6 + 's';
                container.appendChild(particle);
            }
        }

        let currentPageIndex = 0;

        const pages = [
            {
                image: '../../images/flashlivre2.webp',
                type: 'cover',
                position: 'center',
                title: 'Famille FLASH - Le Livre',
                backgroundClass: 'cover-bg'
            },
            {
                type: 'intro',
                position: 'left',
                title: 'Introduction',
                backgroundClass: 'intro-sommaire-bg',
                content: `
                    <p class="mobile-intro-text">La famille FLASH est une lignée légendaire, choisie comme privilégiée par le Géant Freddy. Elle marque l'histoire de Los Santos depuis son commencement, en bien comme en mal.</p>
                    <img src="../../images/flash.jpg" alt="Famille FLASH" class="mobile-page-image" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIG5vbiBkaXNwb25pYmxlPC90ZXh0Pjwvc3ZnPg==';">
                    <p class="mobile-intro-text-epic">Mais qui sont-ils réellement ?</p>
                `
            },
            {
                type: 'sommaire',
                position: 'right',
                title: 'Sommaire',
                backgroundClass: 'intro-sommaire-bg',
                content: `
                    <ul class="mobile-sommaire-list">
                        <li class="mobile-sommaire-item" onclick="goToMangaPage(3)">Chapitre 1: David FLASH</li>
                        <li class="mobile-sommaire-item" onclick="goToMangaPage(7)">Chapitre 2: John FLASH</li>
                    </ul>
                `
            },
            {
                type: 'chapter-title',
                position: 'left',
                pageNumber: 1,
                chapter: 1,
                backgroundClass: 'david-bg',
                title: 'CHAPITRE 1',
                subtitle: 'David FLASH',
                content: `
                    <h1 class="mobile-epic-title">CHAPITRE 1</h1>
                    <h2 class="mobile-chapter-subtitle">David FLASH</h2>
                    <img src="../../images/david_flash.jpg" alt="David FLASH" class="mobile-chapter-image" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIG5vbiBkaXNwb25pYmxlPC90ZXh0Pjwvc3ZnPg==';">
                    <img src="../../images/tigreblancdavid.webp" alt="Symbole de David" class="mobile-chapter-image" style="max-width: 100px;" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlPC90ZXh0Pjwvc3ZnPg==';">
                `
            },
            {
                type: 'text-page',
                position: 'right',
                pageNumber: 2,
                chapter: 1,
                backgroundClass: 'david-bg',
                content: `
                    <div class="mobile-text-content">
                        <p>David FLASH, le patriarche de cette illustre lignée, est arrivé à Los Santos dans les années 1980. Homme d'affaires visionnaire et stratège hors pair, il a su bâtir un empire à partir de rien.</p>
                        <p>Sa rencontre avec le Géant Freddy marqua un tournant décisif dans l'histoire de la famille. Cette alliance mystique conféra aux FLASH des pouvoirs et une influence qui dépassaient l'entendement.</p>
                        <p>David était reconnu pour sa sagesse et sa capacité à anticiper les mouvements de ses adversaires. Il établit les fondations de ce qui deviendrait l'empire FLASH, basé sur le respect, la loyauté et une connexion unique avec des forces surnaturelles.</p>
                    </div>
                `
            },
            {
                type: 'text-page',
                position: 'left',
                pageNumber: 3,
                chapter: 1,
                backgroundClass: 'david-bg',
                content: `
                    <div class="mobile-text-content">
                        <h2>L'héritage du Tigre Blanc</h2>
                        <p>Le symbole du Tigre Blanc devint l'emblème personnel de David FLASH après sa première rencontre avec le Géant Freddy. Cette créature mystique représentait la sagesse, la force et la protection spirituelle.</p>
                        <p>Sous la guidance du Tigre Blanc, David développa des capacités exceptionnelles de leadership et une intuition remarquable pour les affaires. Il savait quand frapper et quand se retirer, toujours un coup d'avance sur ses concurrents.</p>
                        <p>Cette connexion spirituelle se transmettrait plus tard à ses descendants, chacun développant sa propre relation unique avec une créature totémique.</p>
                    </div>
                `
            },
            {
                type: 'episodes',
                position: 'right',
                pageNumber: 4,
                chapter: 1,
                backgroundClass: 'david-bg',
                title: 'Épisodes de David FLASH',
                content: `
                    <div class="mobile-episodes-list">
                        <h2 class="mobile-text-content">Épisodes de David FLASH - Saison 1</h2>
                        <div class="mobile-episode-item">
                            <div class="mobile-episode-title">Épisode 1: POUR LA PREMIÈRE FOIS JE TESTE GTAV RP</div>
                            <button class="mobile-episode-button" onclick="openVideo('z_H0tafxHAc')">📺 Regarder</button>
                        </div>
                        <div class="mobile-episode-item">
                            <div class="mobile-episode-title">Épisode 2: JE FAIS DE L'ILLÉGAL</div>
                            <button class="mobile-episode-button" onclick="openVideo('_fABb3_UqlI')">📺 Regarder</button>
                        </div>
                        <div class="mobile-episode-item">
                            <div class="mobile-episode-title">Épisode 3: MA PREMIÈRE BRAQUAGE</div>
                            <button class="mobile-episode-button" onclick="openVideo('z_H0tafxHAc')">📺 Regarder</button>
                        </div>
                        <div class="mobile-episode-item">
                            <div class="mobile-episode-title">Épisode 4: RENCONTRE AVEC LE GÉANT FREDDY</div>
                            <button class="mobile-episode-button" onclick="openVideo('_fABb3_UqlI')">📺 Regarder</button>
                        </div>
                        <div class="mobile-episode-item">
                            <div class="mobile-episode-title">Épisode 5: L'EMPIRE COMMENCE</div>
                            <button class="mobile-episode-button" onclick="openVideo('z_H0tafxHAc')">📺 Regarder</button>
                        </div>
                        <div class="mobile-episode-item">
                            <div class="mobile-episode-title">Épisode 6: LA LÉGENDE NAÎT</div>
                            <button class="mobile-episode-button" onclick="openVideo('_fABb3_UqlI')">📺 Regarder</button>
                        </div>
                    </div>
                `
            },
            {
                type: 'chapter-title',
                position: 'left',
                pageNumber: 5,
                chapter: 2,
                backgroundClass: 'john-bg',
                title: 'CHAPITRE 2',
                subtitle: 'John FLASH',
                content: `
                    <h1 class="mobile-epic-title">CHAPITRE 2</h1>
                    <h2 class="mobile-chapter-subtitle">John FLASH</h2>
                    <img src="../../images/john_flash.jpg" alt="John FLASH" class="mobile-chapter-image" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIG5vbiBkaXNwb25pYmxlPC90ZXh0Pjwvc3ZnPg==';">
                    <img src="../../images/loupjohn.webp" alt="Symbole de John" class="mobile-chapter-image" style="max-width: 100px;" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlPC90ZXh0Pjwvc3ZnPg==';">
                `
            },
            {
                type: 'text-page',
                position: 'right',
                pageNumber: 6,
                chapter: 2,
                backgroundClass: 'john-bg',
                content: `
                    <div class="mobile-text-content">
                        <h2>L'Héritier</h2>
                        <p>John FLASH, héritier de la lignée, a grandi dans l'ombre de son père David. Charismatique et audacieux, il a repris les rênes de l'empire familial avec une vision nouvelle et moderne.</p>
                        <p>Son lien avec le Géant Freddy lui a conféré des aptitudes uniques, notamment une connexion profonde avec l'esprit du Loup, symbolisant la loyauté, l'instinct de meute et la protection féroce de la famille.</p>
                        <p>Contrairement à son père qui privilégiait la stratégie, John était un homme d'action, n'hésitant jamais à se jeter dans la bataille pour protéger les siens.</p>
                    </div>
                `
            },
            {
                type: 'text-page',
                position: 'left',
                pageNumber: 7,
                chapter: 2,
                backgroundClass: 'john-bg',
                content: `
                    <div class="mobile-text-content">
                        <h2>L'Esprit du Loup</h2>
                        <p>Le Loup devint le guide spirituel de John FLASH, lui enseignant l'importance de la meute et de la hiérarchie familiale. Sous cette influence, John développa un sens aigu de la justice et une loyauté inébranlable envers sa famille.</p>
                        <p>Il établit de nouvelles règles pour l'empire FLASH, créant une structure plus organisée et disciplinée. Chaque membre de la famille avait un rôle précis à jouer, et John s'assurait que personne ne soit laissé pour compte.</p>
                        <p>Son leadership transforma l'empire familial en une véritable dynastie, respectée et crainte à travers tout Los Santos.</p>
                    </div>
                `
            }
        ];

        function updatePage() {
            const book = document.getElementById('book');
            const pageIndicator = document.getElementById('pageIndicator');
            const chapterIndicator = document.getElementById('chapterIndicator');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            book.innerHTML = '';
            const currentPage = pages[currentPageIndex];
            const nextPage = pages[currentPageIndex + 1];

            if (currentPage.position === 'center') {
                const pageDiv = document.createElement('div');
                pageDiv.className = `page cover-page ${currentPage.backgroundClass || ''}`;
                pageDiv.setAttribute('data-position', 'center');
                pageDiv.style.backgroundImage = `url(${currentPage.image})`;
                book.appendChild(pageDiv);
            } else {
                const leftPage = currentPage.position === 'left' ? currentPage : pages[currentPageIndex - 1];
                const rightPage = currentPage.position === 'right' ? currentPage : nextPage;

                if (leftPage) {
                    const pageDiv = document.createElement('div');
                    pageDiv.className = `page ${leftPage.backgroundClass || ''}`;
                    pageDiv.setAttribute('data-position', 'left');
                    const contentDiv = document.createElement('div');
                    contentDiv.className = `page-content ${leftPage.type === 'chapter-title' ? 'chapter-title-page' : ''}`;
                    if (leftPage.title) {
                        const title = document.createElement('h1');
                        title.className = leftPage.type === 'chapter-title' ? 'epic-chapter-title' : 'page-title';
                        title.textContent = leftPage.title;
                        contentDiv.appendChild(title);
                    }
                    if (leftPage.subtitle) {
                        const subtitle = document.createElement('h2');
                        subtitle.className = 'chapter-subtitle';
                        subtitle.textContent = leftPage.subtitle;
                        contentDiv.appendChild(subtitle);
                    }
                    if (leftPage.content) {
                        contentDiv.innerHTML += leftPage.content;
                    }
                    if (leftPage.pageNumber) {
                        const pageNumber = document.createElement('div');
                        pageNumber.className = 'page-number';
                        pageNumber.textContent = `Page ${leftPage.pageNumber}`;
                        contentDiv.appendChild(pageNumber);
                    }
                    pageDiv.appendChild(contentDiv);
                    book.appendChild(pageDiv);
                }

                if (rightPage) {
                    const pageDiv = document.createElement('div');
                    pageDiv.className = `page ${rightPage.backgroundClass || ''}`;
                    pageDiv.setAttribute('data-position', 'right');
                    const contentDiv = document.createElement('div');
                    contentDiv.className = `page-content ${rightPage.type === 'chapter-title' ? 'chapter-title-page' : ''}`;
                    if (rightPage.title) {
                        const title = document.createElement('h1');
                        title.className = rightPage.type === 'chapter-title' ? 'epic-chapter-title' : 'page-title';
                        title.textContent = rightPage.title;
                        contentDiv.appendChild(title);
                    }
                    if (rightPage.subtitle) {
                        const subtitle = document.createElement('h2');
                        subtitle.className = 'chapter-subtitle';
                        subtitle.textContent = rightPage.subtitle;
                        contentDiv.appendChild(subtitle);
                    }
                    if (rightPage.content) {
                        contentDiv.innerHTML += rightPage.content;
                    }
                    if (rightPage.pageNumber) {
                        const pageNumber = document.createElement('div');
                        pageNumber.className = 'page-number';
                        pageNumber.textContent = `Page ${rightPage.pageNumber}`;
                        contentDiv.appendChild(pageNumber);
                    }
                    pageDiv.appendChild(contentDiv);
                    book.appendChild(pageDiv);
                }
            }

            pageIndicator.textContent = currentPage.title || `Page ${currentPage.pageNumber || currentPageIndex + 1}`;
            chapterIndicator.style.display = currentPage.chapter ? 'block' : 'none';
            if (currentPage.chapter) {
                chapterIndicator.textContent = `Chapitre ${currentPage.chapter}`;
            }

            prevBtn.disabled = currentPageIndex === 0;
            nextBtn.disabled = currentPageIndex >= pages.length - 1 || (currentPage.position === 'left' && !nextPage);
        }

        function previousPage() {
            if (currentPageIndex > 0) {
                currentPageIndex--;
                updatePage();
            }
        }

        function nextPage() {
            if (currentPageIndex < pages.length - 1) {
                currentPageIndex++;
                updatePage();
            }
        }

        function updateMangaPage() {
            const pageSelect = document.getElementById('pageSelect');
            const currentPageContent = document.getElementById('currentPageContent');
            const pageIndicatorManga = document.getElementById('pageIndicatorManga');
            const chapterInfoManga = document.getElementById('chapterInfoManga');
            const prevMangaBtn = document.getElementById('prevMangaBtn');
            const nextMangaBtn = document.getElementById('nextMangaBtn');

            const currentPage = pages[currentPageIndex];
            currentPageContent.className = `current-page-content ${currentPage.backgroundClass || ''}`;
            currentPageContent.innerHTML = '';

            if (currentPage.type === 'cover') {
                currentPageContent.style.backgroundImage = `url(${currentPage.image})`;
            } else {
                if (currentPage.title) {
                    const title = document.createElement('h1');
                    title.className = currentPage.type === 'chapter-title' ? 'mobile-epic-title' : 'mobile-page-title';
                    title.textContent = currentPage.title;
                    currentPageContent.appendChild(title);
                }
                if (currentPage.subtitle) {
                    const subtitle = document.createElement('h2');
                    subtitle.className = 'mobile-chapter-subtitle';
                    subtitle.textContent = currentPage.subtitle;
                    currentPageContent.appendChild(subtitle);
                }
                if (currentPage.content) {
                    currentPageContent.innerHTML += currentPage.content;
                }
            }

            pageIndicatorManga.textContent = `Page ${currentPageIndex + 1}/${pages.length}`;
            chapterInfoManga.textContent = currentPage.title || `Page ${currentPage.pageNumber || currentPageIndex + 1}`;
            prevMangaBtn.disabled = currentPageIndex === 0;
            nextMangaBtn.disabled = currentPageIndex >= pages.length - 1;

            pageSelect.value = currentPageIndex;
        }

        function previousMangaPage() {
            if (currentPageIndex > 0) {
                currentPageIndex--;
                updateMangaPage();
            }
        }

        function nextMangaPage() {
            if (currentPageIndex < pages.length - 1) {
                currentPageIndex++;
                updateMangaPage();
            }
        }

        function goToMangaPage(index) {
            currentPageIndex = parseInt(index);
            updateMangaPage();
        }

        function openVideo(videoId) {
            window.open(`https://www.youtube.com/watch?v=${videoId}`, '_blank');
        }

        function populatePageSelector() {
            const pageSelect = document.getElementById('pageSelect');
            pages.forEach((page, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = page.title || `Page ${page.pageNumber || index + 1}`;
                pageSelect.appendChild(option);
            });
        }

        window.onload = () => {
            createParticles();
            populatePageSelector();
            updatePage();
            updateMangaPage();
        };
    </script>
</body>
</html>